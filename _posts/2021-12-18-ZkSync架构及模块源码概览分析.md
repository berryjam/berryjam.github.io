---
layout: post
title: ZkSync架构及模块源码概览分析
date: 2021-12-18 21:24:00.000000000 +09:00
tags: ZkSync Layer2 零知识证明 rust
---


# ZkSync架构及源码初探

**Note. 本篇将简单介绍ZkSync开源项目整体架构、核心模块的功能及整体源码分析。希望能与大家一起探索现在比较火的Layer2开源项目，后续能够基于ZkSync开发出永续合约等应用。**

- [1. ZkSync整体架构](https://github.com/berryjam/berryjam.github.io/blob/master/_posts/2021-12-18-ZkSync%E6%9E%B6%E6%9E%84%E5%8F%8A%E6%A8%A1%E5%9D%97%E6%BA%90%E7%A0%81%E6%A6%82%E8%A7%88%E5%88%86%E6%9E%90.md#1-zksync%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84)

- [2. 核心模块分析](https://github.com/berryjam/berryjam.github.io/blob/master/_posts/2021-12-18-ZkSync%E6%9E%B6%E6%9E%84%E5%8F%8A%E6%A8%A1%E5%9D%97%E6%BA%90%E7%A0%81%E6%A6%82%E8%A7%88%E5%88%86%E6%9E%90.md#2-%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%88%86%E6%9E%90)

- [3. 参考资料](https://github.com/berryjam/berryjam.github.io/blob/master/_posts/2021-12-18-ZkSync%E6%9E%B6%E6%9E%84%E5%8F%8A%E6%A8%A1%E5%9D%97%E6%BA%90%E7%A0%81%E6%A6%82%E8%A7%88%E5%88%86%E6%9E%90.md#3-%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99)

## 1. ZkSync整体架构

### 什么是ZK-Rollup(ZKR)?

引用自Matter Labs的介绍：
> In a ZK-Rollup, operator(s) must generate a succinct Zero-Knowledge Proof (SNARK) for every state transition, which is verified by the Rollup contract on the mainchain. This SNARK proves that there exists a series of transactions, correctly signed by owners, which update the account balances in the correct way, and which lead from the old Merkle root to the new one. It is thus impossible for the operators to commit an invalid or manipulated state.

这是对ZKR的总结，理解这段话也就比较好理解接下来ZkSync项目模块设计的目的及流程了。

### ZkSync架构图 

<div align="center">
<img src="https://github.com/berryjam/berryjam.github.io/blob/master/image/2021-12-18/ZkSync%E6%9E%B6%E6%9E%84%E5%9B%BE.jpg?raw=true" height="100%" width="100%">	
</div>

<p align="center">
  <b>图 1 ZkSync架构图</b><br>
</p>

## 2. 核心模块分析

## 3. 参考资料

[[1]](https://pdos.csail.mit.edu/6.824/labs/lab-mr.html) 6.824 Lab 1: MapReduce

[[2]](http://static.googleusercontent.com/media/research.google.com/zh-CN//archive/mapreduce-osdi04.pdf) MapReduce: Simplified Data Processing on Large Clusters

[[3]](https://github.com/natefinch/atomic) atomic file writing
